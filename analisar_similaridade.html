<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lise de Similaridade - 1.287 Combina√ß√µes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 30px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #007bff;
            margin-bottom: 10px;
        }
        .info-box {
            background: #e7f3ff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .resultado {
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 16px;
        }
        .sucesso {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }
        .warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #0056b3;
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        .progress {
            margin: 20px 0;
            display: none;
        }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #0056b3);
            width: 0%;
            transition: width 0.3s;
            text-align: center;
            line-height: 30px;
            color: white;
            font-weight: bold;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #007bff;
        }
        .stat-label {
            color: #6c757d;
            font-size: 14px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        th {
            background: #007bff;
            color: white;
            font-weight: bold;
        }
        tr:hover {
            background: #f8f9fa;
        }
        .numeros {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        .numero {
            padding: 5px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }
        .par {
            background: #d4edda;
            color: #155724;
        }
        .impar {
            background: #fff3cd;
            color: #856404;
        }
        .diferente {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç An√°lise de Similaridade de Combina√ß√µes</h1>
        <p style="color: #6c757d;">Encontrar combina√ß√µes com 14 n√∫meros em comum entre as 1.287 poss√≠veis</p>

        <div class="info-box">
            <h3>üìã Sua Combina√ß√£o Base:</h3>
            <p><strong>01, 02, 03, 04, 05, 06, 09, 12, 13, 14, 15, 17, 19, 20, 22</strong></p>
            <p>
                <strong>PARES na sua lista:</strong> 2, 4, 6, 12, 14, 20, 22<br>
                <strong>√çMPARES na sua lista:</strong> 1, 3, 5, 9, 13, 15, 17, 19
            </p>
            <p style="background: #fff3cd; padding: 10px; border-radius: 5px; margin-top: 10px;">
                ‚ö†Ô∏è <strong>ATEN√á√ÉO:</strong> Os pares fixos do sistema s√£o: <strong>2, 4, 6, 8, 10, 12, 14</strong><br>
                Sua lista tem <strong style="color: #dc3545;">20 e 22</strong> que N√ÉO est√£o nos fixos!<br>
                Sua lista N√ÉO tem <strong style="color: #dc3545;">8 e 10</strong> que EST√ÉO nos fixos!
            </p>
        </div>

        <div class="info-box">
            <h3>üßÆ Como Funciona:</h3>
            <p><strong>Sistema gera 1.287 combina√ß√µes:</strong></p>
            <ul>
                <li>Todos t√™m os mesmos 7 PARES: <strong>2, 4, 6, 8, 10, 12, 14</strong></li>
                <li>Variando apenas os 8 √çMPARES escolhidos dos 13 dispon√≠veis</li>
                <li>C(13, 8) = 1.287 combina√ß√µes</li>
            </ul>
            <p><strong>Sua lista tem:</strong></p>
            <ul>
                <li>5 pares que est√£o nos fixos: 2, 4, 6, 12, 14</li>
                <li>2 pares que N√ÉO est√£o nos fixos: <strong style="color: #dc3545;">20, 22</strong></li>
                <li>2 pares fixos que voc√™ N√ÉO tem: <strong style="color: #dc3545;">8, 10</strong></li>
                <li>8 √≠mpares: 1, 3, 5, 9, 13, 15, 17, 19</li>
            </ul>
            <p><strong>Para ter 14 em comum:</strong> A ferramenta vai verificar todas as 1.287 combina√ß√µes!</p>
        </div>

        <button onclick="analisarCombinacoes()" id="btnAnalisar">
            üöÄ Analisar Todas as 1.287 Combina√ß√µes
        </button>

        <div class="progress" id="progress">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">0%</div>
            </div>
            <p id="progressText">Processando...</p>
        </div>

        <div id="resultados"></div>
    </div>

    <script>
        const PARES = [2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24];
        const IMPARES = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21, 23, 25];

        // PARES FIXOS DO SISTEMA (sempre os mesmos)
        const paresFixosDoSistema = [2, 4, 6, 8, 10, 12, 14];
        
        // Combina√ß√£o que o usu√°rio quer comparar
        const combinacaoUsuario = [1, 2, 3, 4, 5, 6, 9, 12, 13, 14, 15, 17, 19, 20, 22];
        
        // Separar a combina√ß√£o do usu√°rio
        const paresUsuario = combinacaoUsuario.filter(n => n % 2 === 0); // [2,4,6,12,14,20,22]
        const imparesUsuario = combinacaoUsuario.filter(n => n % 2 !== 0); // [1,3,5,9,13,15,17,19]

        let todasCombinacoes = [];

        function analisarCombinacoes() {
            document.getElementById('btnAnalisar').disabled = true;
            document.getElementById('progress').style.display = 'block';
            document.getElementById('resultados').innerHTML = '';

            // Gerar todas as 1.287 combina√ß√µes
            gerarTodasCombinacoes();
        }

        function gerarTodasCombinacoes() {
            todasCombinacoes = [];
            let count = 0;

            function generateCombinations(array, k, prefix = []) {
                if (k === 0) {
                    const combinacao = [...paresFixosDoSistema, ...prefix].sort((a, b) => a - b);
                    todasCombinacoes.push(combinacao);
                    count++;
                    
                    // Atualizar progress
                    if (count % 100 === 0) {
                        const progress = Math.round((count / 1287) * 100);
                        document.getElementById('progressFill').style.width = progress + '%';
                        document.getElementById('progressFill').textContent = progress + '%';
                        document.getElementById('progressText').textContent = `Gerando combina√ß√µes: ${count}/1287`;
                    }
                    return;
                }

                for (let i = 0; i < array.length; i++) {
                    const newPrefix = [...prefix, array[i]];
                    const remainingArray = array.slice(i + 1);
                    generateCombinations(remainingArray, k - 1, newPrefix);
                }
            }

            // Gerar combina√ß√µes (escolher 8 dos 13 √≠mpares)
            generateCombinations(IMPARES, 8);

            // Aguardar um pouco para UI atualizar, depois analisar
            setTimeout(() => {
                analisarSimilaridade();
            }, 100);
        }

        function analisarSimilaridade() {
            const resultadosDiv = document.getElementById('resultados');
            
            // Contar quantos n√∫meros em comum cada combina√ß√£o tem
            const estatisticas = {
                15: [], // Id√™nticas
                14: [], // 14 em comum
                13: [], // 13 em comum
                12: [], // 12 em comum
                outros: 0
            };

            todasCombinacoes.forEach((combinacao, index) => {
                const numerosEmComum = combinacao.filter(n => combinacaoUsuario.includes(n)).length;
                
                if (numerosEmComum === 15) {
                    estatisticas[15].push({ index, combinacao, comum: numerosEmComum });
                } else if (numerosEmComum === 14) {
                    estatisticas[14].push({ index, combinacao, comum: numerosEmComum });
                } else if (numerosEmComum === 13) {
                    estatisticas[13].push({ index, combinacao, comum: numerosEmComum });
                } else if (numerosEmComum === 12) {
                    estatisticas[12].push({ index, combinacao, comum: numerosEmComum });
                } else {
                    estatisticas.outros++;
                }
            });

            document.getElementById('progress').style.display = 'none';

            // Mostrar estat√≠sticas
            let html = `
                <div class="resultado sucesso">
                    <h2>‚úÖ An√°lise Conclu√≠da!</h2>
                    <p>Foram analisadas todas as <strong>1.287 combina√ß√µes</strong></p>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number">${estatisticas[15].length}</div>
                        <div class="stat-label">Id√™ntica (15/15)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${estatisticas[14].length}</div>
                        <div class="stat-label">14 n√∫meros em comum</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${estatisticas[13].length}</div>
                        <div class="stat-label">13 n√∫meros em comum</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${estatisticas[12].length}</div>
                        <div class="stat-label">12 n√∫meros em comum</div>
                    </div>
                </div>

                <div class="resultado warning">
                    <h3>üéØ Resposta √† Sua Pergunta:</h3>
                    <p style="font-size: 20px;"><strong>${estatisticas[14].length} combina√ß√µes</strong> t√™m exatamente 14 n√∫meros em comum com a sua!</p>
                    <p><small>(Esperado matematicamente: 40 combina√ß√µes)</small></p>
                </div>
            `;

            // Mostrar as combina√ß√µes com 14 em comum
            if (estatisticas[14].length > 0) {
                html += `
                    <h3>üìã Combina√ß√µes com 14 N√∫meros em Comum:</h3>
                    <p><small>O n√∫mero destacado em VERMELHO √© o diferente</small></p>
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Combina√ß√£o (15 n√∫meros)</th>
                                <th>N√∫mero Diferente</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

                estatisticas[14].forEach((item, idx) => {
                    // N√∫meros que est√£o na combina√ß√£o mas N√ÉO na lista do usu√°rio
                    const diferentes = item.combinacao.filter(n => !combinacaoUsuario.includes(n));
                    // N√∫meros que est√£o na lista do usu√°rio mas N√ÉO na combina√ß√£o
                    const faltantes = combinacaoUsuario.filter(n => !item.combinacao.includes(n));
                    
                    html += `
                        <tr>
                            <td>${idx + 1}</td>
                            <td>
                                <div class="numeros">
                                    ${item.combinacao.map(n => {
                                        const isDiferente = !combinacaoUsuario.includes(n);
                                        const isPar = n % 2 === 0;
                                        const classe = isDiferente ? 'diferente' : (isPar ? 'par' : 'impar');
                                        return `<span class="numero ${classe}">${n}</span>`;
                                    }).join('')}
                                </div>
                            </td>
                            <td>
                                <strong style="color: #721c24;">
                                    Faltam: ${faltantes.join(', ')} | Tem a mais: ${diferentes.join(', ')}
                                </strong>
                            </td>
                        </tr>
                    `;
                });

                html += `
                        </tbody>
                    </table>
                `;
            }

            // An√°lise detalhada
            html += `
                <div class="info-box">
                    <h3>üìä An√°lise Detalhada:</h3>
                    <p><strong>Por que ${estatisticas[14].length} combina√ß√µes?</strong></p>
                    <p><strong>An√°lise:</strong></p>
                    <ul>
                        <li><strong>Pares fixos do sistema:</strong> 2, 4, 6, 8, 10, 12, 14</li>
                        <li><strong>Pares na sua lista:</strong> ${paresUsuario.join(', ')}</li>
                        <li><strong>√çmpares na sua lista:</strong> ${imparesUsuario.join(', ')}</li>
                    </ul>
                    <p>Cada combina√ß√£o com 14 em comum significa que falta apenas 1 n√∫mero e tem 1 a mais.</p>
                </div>
            `;

            resultadosDiv.innerHTML = html;
            document.getElementById('btnAnalisar').disabled = false;
        }
    </script>
</body>
</html>
